## POS机制
实际上，POS只是一类共识机制的统称，实际上以太坊的使用的细分共识机制是[Casper FFG](https://eth2book.info/capella/part2/consensus/casper_ffg/)。
Casper FFG 的有效性实际上取决于两个重要想法。首先，两阶段提交（论证和最终确定），第二，负责任的安全。
两阶段提交为 Casper FFG 提供了经典的共识安全性。它可以将区块声明为最终区块，并确保诚实的验证者不会恢复它们。但只有当超过三分之二的股份由诚实的验证者控制时，这一点才可执行，这是我们不能总是假设的。
除此之外，Casper FFG 还为超过三分之一的验证者不诚实的情况提供了称为“责任安全”的额外保证。如果该链遇到最终性冲突，则质押以太币总量的至少三分之一将被烧毁。这是通过削减违反两条 Casper 戒律之一的验证器来强制执行的。

## Casper FFG
Casper FFG 是一种元共识协议。它是一个覆盖层，可以在底层共识协议之上运行，以增加最终确定性。最终性是指链中的区块保证永远不会被还原：它们将永远成为链的一部分。在以太坊的权益证明共识中，底层协议是LMD GHOST，它不提供最终性——验证者总是有可能决定建立一条竞争链，而且这样做不会受到真正的惩罚。Casper FFG 充当“最终性小工具”，我们用它来为 LMD GHOST 添加最终性。
这意味着当我们看到诚实验证者的多数票时，我们可以使用计票来判断。更准确地说，来自管理大部分权益的验证者的投票 - 在接下来的所有内容中，每个验证者的投票都根据其管理的权益的价值进行加权。
FFG 部分代表“Friendly Finality Gadget”

## 以太坊的共识规范
[这里是以太坊的共识规范](https://github.com/ethereum/consensus-specs)，我们能够查到每一次升级的共识层的设计。  

<image src = "docs/images/ethereum_consensus_design_process.png"></image>

这里陈列着所有以太坊共识层的升级规划以及进度。以上图片是已经完成了的升级，目前真正进行Deneb的共识层升级。